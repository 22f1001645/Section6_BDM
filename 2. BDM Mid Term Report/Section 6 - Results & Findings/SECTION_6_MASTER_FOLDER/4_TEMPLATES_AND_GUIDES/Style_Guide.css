/* Premium design system for Section previews */
:root {
  --bg: #ffffff;
  --fg: #111827;
  --muted: #4b5563;
  --accent: #0ea5e9;
  --accent-dark: #0284c7;
  --surface: #f8fafc;
  --surface-2: #eef2f7;
  --border: #e5e7eb;
  --radius: 12px;
  --shadow: 0 10px 20px rgba(17, 24, 39, 0.08);
  --shadow-soft: 0 6px 12px rgba(17, 24, 39, 0.06);
  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-5: 24px;
  --space-6: 32px;
  --space-7: 48px;
}

html, body { margin: 0; padding: 0; background: var(--bg); color: var(--fg); }
img { max-width: 100%; height: auto; display: block; }
.container { max-width: 1000px; margin: var(--space-6) auto; padding: 0 var(--space-4); }
h1, h2, h3 { margin: 0 0 var(--space-3) 0; }
p { margin: 0 0 var(--space-4) 0; }
figure { margin: var(--space-5) 0; }
figcaption { color: #374151; font-size: 0.95rem; }

/* Typography */
body { font-family: Georgia, 'Times New Roman', serif; line-height: 1.6; }
h1 { font-size: 2.5rem; letter-spacing: -0.02em; }
h2 { font-size: 1.75rem; letter-spacing: -0.01em; }
h3 { font-size: 1.25rem; }
.muted { color: var(--muted); }

/* Accessibility and interactions */
a { color: var(--accent-dark); text-decoration: none; }
a:hover, a:focus { text-decoration: underline; }
:focus-visible { outline: 3px solid var(--accent); outline-offset: 2px; }
.skip-link { position: absolute; left: -9999px; top: -9999px; }
.skip-link:focus { left: var(--space-4); top: var(--space-4); background: #fff; padding: var(--space-2) var(--space-3); border-radius: 6px; box-shadow: var(--shadow-soft); }

/* Header */
.hero { background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 40%, #f8fafc 100%); padding: var(--space-7) 0 var(--space-6); border-bottom: 1px solid var(--border); }
.hero .title { font-size: 2.5rem; }
.hero .subtitle { color: var(--muted); }

/* Navigation (TOC) */
nav.toc { position: sticky; top: 12px; background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius); padding: var(--space-4); box-shadow: var(--shadow-soft); margin-bottom: var(--space-6); }
nav.toc ul { list-style: none; padding: 0; margin: 0; }
nav.toc li { padding: 6px 0; }
nav.toc a { display: inline-block; padding: 4px 6px; border-radius: 6px; }
nav.toc a[aria-current="true"], nav.toc a:hover { background: #e0f2fe; }

/* Sections */
.section { background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius); padding: var(--space-5); margin-bottom: var(--space-6); box-shadow: var(--shadow); }
.section h2 { border-bottom: 1px solid var(--border); padding-bottom: var(--space-3); margin-bottom: var(--space-4); }
.orir h3 { margin-top: var(--space-3); }
.metric { color: var(--fg); font-weight: 700; }
.src { color: var(--muted); font-size: 0.92rem; }

/* Figures */
.figure-card { background: var(--surface-2); border: 1px solid var(--border); border-radius: var(--radius); padding: var(--space-4); box-shadow: var(--shadow-soft); }
.chart-img { border-radius: 8px; box-shadow: var(--shadow-soft); transition: transform 220ms ease, box-shadow 220ms ease; }
.figure-card:hover .chart-img { transform: translateY(-2px); box-shadow: 0 12px 24px rgba(17,24,39,0.12); }

/* Responsive */
@media (min-width: 900px) {
  .section-grid { display: grid; grid-template-columns: 1.2fr 0.8fr; gap: var(--space-5); align-items: start; }
}

/* Animation preferences */
@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; }
}

/* Print-specific rules for PDF export */
@page {
  size: A4;
  margin: 20mm;
}
@media print {
  .page-break { break-before: page; }
  a { color: #000; text-decoration: none; }
}